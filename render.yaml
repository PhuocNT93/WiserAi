services:
  # Backend Service
  - type: web
    name: wiser-ai-be
    runtime: docker
    repo: https://github.com/PhuocNT93/WiserAi # Update this if needed, Render usually auto-detects
    rootDir: wiser-ai-be
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: wiser-ai-db
          property: connectionString
      - key: JWT_SECRET
        generateValue: true
      - key: JWT_REFRESH_SECRET
        generateValue: true
      - key: PORT
        value: 8000
    plan: free

  # Frontend Service
  - type: web
    name: wiser-ai-fe
    runtime: docker
    rootDir: wiser-ai-fe
    envVars:
      - key: NEXT_PUBLIC_API_URL
        value: https://YOUR_BACKEND_SERVICE_NAME.onrender.com/api # Update this manually in Render Dashboard after deploying backend
        # fromService property 'url' is not supported for web services, so we cannot auto-link the public URL here.

databases:
  - name: wiser-ai-db
    databaseName: wiser_ai
    plan: free
